sudo: false 
dist: trusty
language: node_js
node_js:
 - "node"
cache:
  directories:
  - node_modules #Cache node_modules for faster builds
before_install:
- openssl aes-256-cbc -K $encrypted_745ce00b467b_key -iv $encrypted_745ce00b467b_iv -in envs.tar.enc -out envs.tar -d
- tar xvf envs.tar
install: 
- npm install
- npm run build
deploy:
  provider: azure_web_apps
  site: easypedweb
  skip_cleanup: true
  verbose: true

# https://github.com/laverdet/node-fibers/issues/331#issuecomment-274826954
env:
  - CXX=g++-4.8

addons:
    apt:
      sources:
        - ubuntu-toolchain-r-test
      packages:
        - g++-4.8